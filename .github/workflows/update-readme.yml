name: Update GitHub Stats

on:
  schedule:
    - cron: '0 */6 * * *'  # Run every 6 hours
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GH_PAT }}

      - name: Update README with GitHub Stats
        run: |
          cat <<EOF > README.md
          ## Hi there and welcome 👋

          ![Header](./bkr.png)

          ## 📊 GitHub Statistics

          <div align="center">
            <img src="https://github-readme-stats.vercel.app/api?username=Hardek00&show_icons=true&count_private=true&include_all_commits=true&theme=tokyonight&hide_border=true&bg_color=0D1117" alt="GitHub Stats" />
          </div>

          <div align="center">
            <img src="https://github-readme-stats.vercel.app/api/top-langs/?username=Hardek00&layout=compact&theme=tokyonight&hide_border=true&bg_color=0D1117&count_private=true" alt="Top Languages" />
          </div>

          ## 🏆 GitHub Profile Summary

          <div align="center">
            <img src="https://github-profile-summary-cards.vercel.app/api/cards/profile-details?username=Hardek00&theme=github_dark" alt="Profile Summary" />
          </div>

          <div align="center">
            <img src="https://github-profile-summary-cards.vercel.app/api/cards/repos-per-language?username=Hardek00&theme=github_dark" alt="Repos per Language" />
            <img src="https://github-profile-summary-cards.vercel.app/api/cards/most-commit-language?username=Hardek00&theme=github_dark" alt="Most Commit Language" />
          </div>

          <div align="center">
            <img src="https://github-profile-summary-cards.vercel.app/api/cards/stats?username=Hardek00&theme=github_dark" alt="Stats" />
            <img src="https://github-profile-summary-cards.vercel.app/api/cards/productive-time?username=Hardek00&theme=github_dark&utcOffset=1" alt="Productive Time" />
          </div>

          ## 🔥 Streak Stats

          <div align="center">
            <img src="https://github-readme-streak-stats.herokuapp.com/?user=Hardek00&theme=tokyonight&hide_border=true&background=0D1117" alt="GitHub Streak" />
          </div>

          ## 🏅 GitHub Trophies

          <div align="center">
            <img src="https://github-profile-trophy.vercel.app/?username=Hardek00&theme=darkhub&no-frame=true&margin-w=15&margin-h=15&column=7" alt="GitHub Trophies" />
          </div>

          ## 📈 Activity Graph

          <div align="center">
            <img src="https://github-readme-activity-graph.vercel.app/graph?username=Hardek00&theme=tokyo-night&hide_border=true&bg_color=0D1117" alt="Activity Graph" />
          </div>

          ---

          <div align="center">
            <img src="https://komarev.com/ghpvc/?username=Hardek00&color=blueviolet&style=flat-square&label=Profile+Views" alt="Profile Views" />
          </div>

          <!--
          **Hardek00/Hardek00** is a ✨ _special_ ✨ repository because its \`README.md\` (this file) appears on your GitHub profile.
          -->
          EOF

      - name: Commit and push changes
        env:
          GH_PAT: ${{ secrets.GH_PAT }}
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'

          # Check if there are changes
          if git diff --quiet; then
            echo "No changes to commit"
            exit 0
          fi

          git add README.md
          git commit -m "🤖 Update README with latest GitHub stats"
          git push
